/***************************************************************************
   ***********               REQUIRE Mongoose                 ************
   *********************************************************************** 
****************************************************************************/
const mongoose = require('mongoose');
/***************************************************************************
   ***********               End of REQUIRE Mongoose          ************
   *********************************************************************** 
****************************************************************************/

/***************************************************************************
   *****      Create a Variable for the Mongoose Schema to use       *****
   *********************************************************************** 
****************************************************************************/
const Schema = mongoose.Schema; //THIS IS TO HAVE A REFERENCE TO THE SCHEMA
/***************************************************************************
   *****  End of Create a Variable for the Mongoose Schema to use    *****
   *********************************************************************** 
****************************************************************************/


/***************************************************************************
    ***********       Create the Mongoose Schema to use        ***********  
   *********************************************************************** 
****************************************************************************/
const reviewSchema = new Schema({
    body: String,
    rating: Number,
    //create a key property to store the ObjectID referenceing a document in the User model 
    author: {
      //The first thing to do is set the type of each reviewID to be an ObjectID 
       // by using: mongoose.Schema.Types.ObjectId (this is prodivided by mongoose)
        // But put:mongoose.Schema into its own variable
     type: Schema.Types.ObjectId,

      //Then use: ref, and use it to set the name of the model that whose document
       //ObjectId will be referenced
         // ref option is what tells Mongoose which model to use duirng population
     ref: 'User'
   }
});
/***************************************************************************
    ***********   End of Create the Mongoose Schema to use     ***********  
   *********************************************************************** 
****************************************************************************/

/***************************************************************************
    ***********     Create a Model with the Schema created     *********** 
                    AND export the Model 
   *********************************************************************** 
****************************************************************************/
module.exports = mongoose.model('Review', reviewSchema);
/***************************************************************************
    *****       End of Create a Model with the Schema created       *****  
   *********************************************************************** 
****************************************************************************/